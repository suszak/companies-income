(this["webpackJsonpcompanies-income"]=this["webpackJsonpcompanies-income"]||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),s=a.n(c),o=(a(16),a(8)),i=a(1),l=a.n(i),u=a(6),m=a(2),p=a(3),f=a(5),A=a(4),h=(a(18),a(19),function(e){Object(f.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).slowConnection=function(){document.querySelector(".loadingScreen__info").innerText="Your connection is slow, please wait a moment"},n.state={slowConnectionTimeout:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({slowConnectionTimeout:setTimeout(this.slowConnection,16e3)})}},{key:"componentWillUnmount",value:function(){this.setState({slowConnectionTimeout:clearTimeout(this.state.slowConnectionTimeout)})}},{key:"render",value:function(){return r.a.createElement("section",{className:"loadingScreen"},r.a.createElement("div",{className:"loadingScreen__title"},"Loading"),r.a.createElement("div",{className:"loadingScreen__info"}),r.a.createElement("span",{className:"loadingScreen__animation"},r.a.createElement("div",{className:"element1"}),r.a.createElement("div",{className:"element2"}),r.a.createElement("div",{className:"element3"}),r.a.createElement("div",{className:"element4"}),r.a.createElement("div",{className:"element5"})),r.a.createElement("div",{className:"background background__first"}),r.a.createElement("div",{className:"background background__second"}))}}]),a}(n.Component)),d=a(7);a(20),a(21),a(22);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createElement("image",{id:"Warstwa_1","data-name":"Warstwa 1",x:20,y:20,width:160,height:160,xlinkHref:"data:img/png;base64,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"}),v=function(e){var t=e.svgRef,a=e.title,n=w(e,["svgRef","title"]);return r.a.createElement("svg",g({width:200,height:200,viewBox:"0 0 200 200",ref:t},n),a?r.a.createElement("title",null,a):null,b)},E=r.a.forwardRef((function(e,t){return r.a.createElement(v,g({svgRef:t},e))})),y=(a.p,function(e){return r.a.createElement("div",{className:"tableItem"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"elements"},r.a.createElement("p",{className:"tableItem__element"},e.id),r.a.createElement("p",{className:"tableItem__element"},e.name)),r.a.createElement("div",{className:"elements"},r.a.createElement("p",{className:"tableItem__element"},e.city),r.a.createElement("p",{className:"tableItem__element"},e.totalIncome))),r.a.createElement(E,{className:"tableItem__open"}))}),x=function(e){Object(f.a)(a,e);var t=Object(A.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"incomeTable"},r.a.createElement("ul",{className:"table"},0!==this.props.currentCompanies.length?this.props.currentCompanies.map((function(e){return r.a.createElement(y,{key:e.id,id:e.id,name:e.name,city:e.city,totalIncome:e.totalIncome})})):r.a.createElement("p",{className:"table__error"},"Nothing to show")))}}]),a}(n.Component),O=(a(23),function(e){var t=e.currentPage,a=e.totalPages,n=e.paginate,c=[];if(a>=5){if(t-1>1&&t+1<a){c.push(1),c.push("...");for(var s=t-1;s<=t+1;s++)c.push(s);c.push("..."),c.push(a)}else if(t-1<=1&&t+1<a){for(var o=1;o<=t+1;o++)c.push(o);c.push("..."),c.push(a)}else if(t-1>1&&t+1>=a){c.push(1),c.push("...");for(var i=t-1;i<=a;i++)c.push(i)}}else for(var l=1;l<=a;l++)c.push(l);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pages"},c.map((function(e,a){return"..."===e?r.a.createElement("li",{key:9999-a,className:"pages__number dots"},e):r.a.createElement("li",{onClick:function(){return n(e)},key:e,className:e===t?"pages__number pages__number--current":"pages__number"},r.a.createElement("p",{className:e===t?"pages__item pages__item--current":"pages__item"},e))}))))}),C=function(e){var t=e.data,a=e.numberOfItems,c=Object(n.useState)(1),s=Object(d.a)(c,2),o=s[0],i=s[1],l=Object(n.useState)(a),u=Object(d.a)(l,1)[0],m=Object(n.useState)([]),p=Object(d.a)(m,2),f=p[0],A=p[1],h=o*u,g=h-u,w=f.slice(g,h),b=Math.ceil(f.length/u);return Object(n.useEffect)((function(e,a){a&&a.dataToShow.length===t[0].length||A(t[0])}),[t]),r.a.createElement("section",{className:"loaded"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__text"},"Companies")),r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"search"},r.a.createElement("input",{type:"text",id:"filter",className:"search__input",placeholder:"Type company name here..."}),r.a.createElement("button",{className:"search__button",onClick:function(){var e=document.querySelector("#filter").value;if(e.length>0){var a=t[0].filter((function(t){return-1!==t.name.toUpperCase().indexOf(e.toUpperCase())}));A(a),i(1)}else A(t[0]),i(1)}},"Filter")),r.a.createElement(x,{data:f,currentCompanies:w}),r.a.createElement(O,{currentPage:o,totalPages:b,paginate:function(e){i(e)}})),r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__text"},"Created by Mateusz Gre\u0144, 2020")),r.a.createElement("span",{className:"background"}))},N=function(){var e=.01*window.innerHeight;return document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.innerHeight<=640?3:window.innerHeight<=840?4:6},k=function(e){Object(f.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getSummaryData=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,fetch("https://recruitment.hal.skygate.io/companies");case 4:if(200!==(a=e.sent).status){e.next=10;break}return e.next=8,a.json();case 8:n=e.sent,t.push(n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),n.getIncomeData=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t[0],a=[],n=[],t.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var r,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},c=0,e.prev=2,e.next=5,fetch("https://recruitment.hal.skygate.io/incomes/".concat(t.id));case 5:if(200!==(s=e.sent).status){e.next=16;break}return e.next=9,s.json();case 9:return i=e.sent,n.push(i),c=0,i.incomes.map((function(e){return c+=parseFloat(e.value),i})),r=Object(o.a)(Object(o.a)({},t),{},{totalIncome:parseFloat(c.toFixed(2))}),a.push(r),e.abrupt("return",0);case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",0);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",[a,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.sortArrayByTotalIncome=function(e){if(e.length>0){var t=e[0],a=e[1];return[t.sort((function(e,t){return t.totalIncome-e.totalIncome})),a]}},n.state={dataArray:[],sorted:!1,numberOfItems:5},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(),e.t0=this,e.t1=this,e.next=5,this.getSummaryData();case 5:return e.t2=e.sent,e.next=8,e.t1.getIncomeData.call(e.t1,e.t2);case 8:e.t3=e.sent,e.t4=t,e.t5={dataArray:e.t3,numberOfItems:e.t4},e.t0.setState.call(e.t0,e.t5);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.dataArray.length===this.state.dataArray.length){e.next=9;break}n=-100;case 2:if(n===this.state.dataArray[0].length){e.next=8;break}return n=this.state.dataArray[0].length,e.next=6,new Promise((function(e){return setTimeout(e,5e3)}));case 6:e.next=2;break;case 8:this.setState({dataArray:this.sortArrayByTotalIncome(this.state.dataArray),sorted:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.state.sorted?r.a.createElement(C,{data:this.state.dataArray,numberOfItems:this.state.numberOfItems}):r.a.createElement(h,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.629ac3ec.chunk.js.map