(this["webpackJsonpcompanies-income"]=this["webpackJsonpcompanies-income"]||[]).push([[0],{31:function(e,t,a){e.exports=a(69)},36:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),l=a.n(r),o=(a(36),a(1)),i=a(8),s=a(2),u=a(11),m=a.n(u),f=(a(38),a(39),a(40),function(){document.querySelector(".loadingScreen__info").innerText="Your connection is slow, please wait a moment"}),p=function(){return Object(n.useEffect)((function(){var e=setTimeout(f,16e3);return function(){return clearTimeout(e)}}),[]),c.a.createElement("section",{className:"loadingScreen"},c.a.createElement("div",{className:"loadingScreen__title"},"Loading"),c.a.createElement("div",{className:"loadingScreen__info"}),c.a.createElement("span",{className:"loadingScreen__animation"},c.a.createElement("div",{className:"element1"}),c.a.createElement("div",{className:"element2"}),c.a.createElement("div",{className:"element3"}),c.a.createElement("div",{className:"element4"}),c.a.createElement("div",{className:"element5"})),c.a.createElement("div",{className:"background background__first"}),c.a.createElement("div",{className:"background background__second"}))};a(41),a(42),a(43);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var A=c.a.createElement("image",{id:"Warstwa_1","data-name":"Warstwa 1",x:20,y:20,width:160,height:160,xlinkHref:"data:img/png;base64,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"}),b=function(e){var t=e.svgRef,a=e.title,n=g(e,["svgRef","title"]);return c.a.createElement("svg",d({width:200,height:200,viewBox:"0 0 200 200",ref:t},n),a?c.a.createElement("title",null,a):null,A)},E=c.a.forwardRef((function(e,t){return c.a.createElement(b,d({svgRef:t},e))})),w=(a.p,function(e){var t=e.id,a=e.name,n=e.city,r=e.totalIncome;return c.a.createElement("div",{className:"tableItem"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"elements"},c.a.createElement("p",{className:"tableItem__element"},t),c.a.createElement("p",{className:"tableItem__element"},a)),c.a.createElement("div",{className:"elements"},c.a.createElement("p",{className:"tableItem__element"},n),c.a.createElement("p",{className:"tableItem__element"},r))),c.a.createElement(i.b,{to:"/company/".concat(t),className:"tableItem__open"},c.a.createElement(E,{className:"tableItem__open"})))}),h=function(e){var t=e.currentCompanies;return c.a.createElement("section",{className:"incomeTable"},c.a.createElement("ul",{className:"table"},0!==t.length?t.map((function(e){return c.a.createElement(w,{key:e.id,id:e.id,name:e.name,city:e.city,totalIncome:e.totalIncome})})):c.a.createElement("p",{className:"table__error"},"Nothing to show")))},v=(a(49),function(e){var t=e.currentPage,a=e.totalPages,r=e.paginate,l=Object(n.useState)([]),i=Object(o.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){a>=5?t-2>1&&t+2<a?u(Array(5).fill(t-2).map((function(e,t){return e+t}))):t-2<=1&&t+1<a?u(Array(5).fill(1).map((function(e,t){return e+t}))):t-2>1&&t+2>=a&&u(Array(5).fill(a-4).map((function(e,t){return e+t}))):u(Array(a).fill(1).map((function(e,t){return e+t})))}),[t,a]),c.a.createElement("nav",null,c.a.createElement("ul",{className:"pages"},s.map((function(e){return c.a.createElement("li",{onClick:function(){return r(e)},key:e,className:e===t?"pages__number pages__number--current":"pages__number"},c.a.createElement("p",{className:e===t?"pages__item pages__item--current":"pages__item"},e))}))))}),O=function(e){var t=e.company,a=e.numberOfItems,r=Object(n.useState)(1),l=Object(o.a)(r,2),s=l[0],u=l[1],m=Object(n.useState)(a),f=Object(o.a)(m,1)[0],p=Object(n.useState)([]),d=Object(o.a)(p,2),g=d[0],A=d[1],b=s*f,E=b-f,w=g.slice(E,b),O=Math.ceil(g.length/f);return Object(n.useEffect)((function(){A(t)}),[t]),c.a.createElement("section",{className:"loaded"},c.a.createElement("header",{className:"header"},c.a.createElement(i.b,{to:"/companies-income/",className:"header__text"},c.a.createElement("h1",{className:"header__text"},"Companies"))),c.a.createElement("main",{className:"main"},c.a.createElement("section",{className:"search"},c.a.createElement("input",{type:"text",id:"filter",onChange:function(){return function(e,t,a){var n=document.querySelector("#filter").value;n.length>0?(t(e.filter((function(e){return-1!==e.name.toUpperCase().indexOf(n.toUpperCase())}))),a(1)):(t(e),a(1))}(t,A,u)},className:"search__input",placeholder:"Type company name here..."})),c.a.createElement(h,{currentCompanies:w}),c.a.createElement(v,{currentPage:s,totalPages:O,paginate:function(e){u(e)}})),c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer__text"},"Created by Mateusz Gre\u0144, 2020")),c.a.createElement("span",{className:"background"}))},j=function(){var e=.01*window.innerHeight;return document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.innerHeight<=640?3:window.innerHeight<=840?4:6},y=(a(50),function(e,t,a,n,c){var r=a[0].incomes.filter((function(e){return new Date(e.date)>=n&&new Date(e.date)<=c})),l=0,o=0;r.length>0&&(o=(l=r.reduce((function(e,t){return e+parseFloat(t.value)}),0))/r.length),t(o.toFixed(2)),e(l.toFixed(2))}),N=function(e){var t,a=e.data,r=Object(n.useState)([]),l=Object(o.a)(r,2),m=l[0],f=l[1],p=Object(n.useState)([]),d=Object(o.a)(p,2),g=d[0],A=d[1],b=Object(s.f)().id,E=Object(n.useState)(0),w=Object(o.a)(E,2),h=w[0],v=w[1],O=Object(n.useState)(0),j=Object(o.a)(O,2),N=j[0],D=j[1],S=Object(n.useState)(0),x=Object(o.a)(S,2),F=x[0],C=x[1],K=Object(n.useState)(0),I=Object(o.a)(K,2),M=I[0],P=I[1],k=new Date,Y=null;k.getMonth()-1<0?(t=11,Y=k.getFullYear()-1):(t=k.getMonth()-1,Y=k.getFullYear());var B=Object(n.useState)(new Date(Y,t,1)),_=Object(o.a)(B,2),U=_[0],H=_[1],Q=Object(n.useState)(new Date(k.getFullYear(),k.getMonth(),1)),z=Object(o.a)(Q,2),X=z[0],q=z[1],R=function(e){return e.filter((function(e){return Number(e.id)===Number(b)}))};return Object(n.useEffect)((function(){if(0===m.length&&f(R(a[1])),0===g.length&&A(R(a[0])),m.length>0){!function(e,t,a){if(e.length>0){var n=e[0].incomes.reduce((function(e,t){return e+parseFloat(t.value)}),0),c=n/e[0].incomes.length;t(n.toFixed(2)),a(c.toFixed(2))}}(m,v,D),function(e,t,a,n,c,r){e<=t?y(c,n,a,e,t):(r(e),y(c,n,a,e,t),u.store.addNotification({title:"Date changed",message:"End date automatically set as start date.",type:"info",insert:"top",container:"top-right",dismiss:{duration:5e3,onScreen:!0}}),u.store.addNotification({title:"Bad dates",message:"Start date is earlier than end date!",type:"danger",insert:"top",container:"top-right",dismiss:{duration:5e3,onScreen:!0}}))}(U,X,m,C,P,q);var e=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}),t=e.formatToParts(U),n=Object(o.a)(t,5),c=n[0].value,r=n[2].value,l=n[4].value,i=e.formatToParts(X),s=Object(o.a)(i,5),p=s[0].value,d=s[2].value,b=s[4].value;document.querySelector("#startDate").value="".concat(l,"-").concat(c,"-").concat(r),document.querySelector("#endDate").value="".concat(b,"-").concat(p,"-").concat(d)}}),[a,g,m,U,X]),c.a.createElement("section",{className:"company"},g.length>0&&m.length>0?c.a.createElement("div",{className:"wrapper"},c.a.createElement(i.b,{to:"/companies-income/",className:"company__back"},"Back"),c.a.createElement("div",{className:"dateRange"},c.a.createElement("label",{htmlFor:"startDate"},"From:"),c.a.createElement("input",{type:"date",id:"startDate",name:"startDate",onChange:function(){H(new Date(document.querySelector("#startDate").value))}}),c.a.createElement("label",{htmlFor:"endDate"},"to:"),c.a.createElement("input",{type:"date",id:"endDate",name:"endDate",onChange:function(){q(new Date(document.querySelector("#endDate").value))}})),c.a.createElement("div",{className:"company__info"},c.a.createElement("p",null,"ID: ",g[0].id),c.a.createElement("p",null,"Name: ",g[0].name),c.a.createElement("p",null,"City: ",g[0].city),c.a.createElement("p",null,"Total income: ",h),c.a.createElement("p",null,"Lifetime average: ",N),c.a.createElement("p",null,"Your range income: ",M),c.a.createElement("p",null,"Your range average income: ",F))):"",c.a.createElement("div",{className:"background"}))};var D=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current},S=a(17),x=a(12),F=a.n(x),C=a(16),K=a(30),I=a.n(K),M=function(){var e=Object(C.a)(F.a.mark((function e(t){var a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,fetch("https://recruitment.hal.skygate.io/companies");case 4:if(!(n=e.sent).ok){e.next=9;break}return e.next=8,n.json();case 8:a=e.sent;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:t(a);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(C.a)(F.a.mark((function e(t,a){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&Promise.all(t.map((function(e){return I()("https://recruitment.hal.skygate.io/incomes/".concat(e.id))}))).then((function(e){return Promise.all(e.map((function(e){return e.data}))).then((function(e){var t=e.filter((function(e){return""!==e}));a(t)}))})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),f=u[0],d=u[1],g=Object(n.useState)(!1),A=Object(o.a)(g,2),b=A[0],E=A[1],w=Object(n.useState)(5),h=Object(o.a)(w,2),v=h[0],y=h[1],x=Object(n.useState)(!0),F=Object(o.a)(x,2),C=F[0],K=F[1],I=D(a),k=D(f);return Object(n.useEffect)((function(){window.addEventListener("resize",(function(){j()})),0===a.length&&(M(r),y(j())),I&&I.length!==a.length&&a.length>0&&P(a,d),k&&k.length!==f.length&&f.length>0&&function(e,t,a,n){a(e.map((function(e){var a=t.find((function(t){return t.id===e.id})).incomes.reduce((function(e,t){return e+parseFloat(t.value)}),0);return Object(S.a)(Object(S.a)({},e),{},{totalIncome:a.toFixed(2)})}))),n(!1)}(a,f,r,K),a.length>0&&(C||b||!a[0].totalIncome||function(e,t,a){t(e.sort((function(e,t){return t.totalIncome-e.totalIncome}))),a(!0)}(a,r,E))}),[a,f]),c.a.createElement(i.a,null,c.a.createElement(m.a,null),c.a.createElement("div",{className:"App"},c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/"},b?c.a.createElement(O,{company:a,numberOfItems:v}):c.a.createElement(p,null)),c.a.createElement(s.a,{exact:!0,path:"/companies-income/"},b?c.a.createElement(O,{company:a,numberOfItems:v}):c.a.createElement(p,null)),c.a.createElement(s.a,{path:"/company/:id"},b?c.a.createElement(N,{data:[a,f]}):c.a.createElement(p,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.1c19c24a.chunk.js.map