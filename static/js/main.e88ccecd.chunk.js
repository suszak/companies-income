(this["webpackJsonpcompanies-income"]=this["webpackJsonpcompanies-income"]||[]).push([[0],{30:function(e,t,a){e.exports=a(66)},35:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=(a(35),a(16)),i=a(11),s=a.n(i),m=a(13),u=a(2),f=a(8),p=a(1),d=a(28),g=a.n(d),A=(a(54),a(55),function(){var e=function(){document.querySelector(".loadingScreen__info").innerText="Your connection is slow, please wait a moment"};return Object(n.useEffect)((function(){var t=setTimeout(e,16e3);return function(){return clearTimeout(t)}}),[]),r.a.createElement("section",{className:"loadingScreen"},r.a.createElement("div",{className:"loadingScreen__title"},"Loading"),r.a.createElement("div",{className:"loadingScreen__info"}),r.a.createElement("span",{className:"loadingScreen__animation"},r.a.createElement("div",{className:"element1"}),r.a.createElement("div",{className:"element2"}),r.a.createElement("div",{className:"element3"}),r.a.createElement("div",{className:"element4"}),r.a.createElement("div",{className:"element5"})),r.a.createElement("div",{className:"background background__first"}),r.a.createElement("div",{className:"background background__second"}))});a(56),a(57),a(58);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var E=r.a.createElement("image",{id:"Warstwa_1","data-name":"Warstwa 1",x:20,y:20,width:160,height:160,xlinkHref:"data:img/png;base64,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"}),h=function(e){var t=e.svgRef,a=e.title,n=v(e,["svgRef","title"]);return r.a.createElement("svg",b({width:200,height:200,viewBox:"0 0 200 200",ref:t},n),a?r.a.createElement("title",null,a):null,E)},w=r.a.forwardRef((function(e,t){return r.a.createElement(h,b({svgRef:t},e))})),O=(a.p,function(e){return r.a.createElement("div",{className:"tableItem"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"elements"},r.a.createElement("p",{className:"tableItem__element"},e.id),r.a.createElement("p",{className:"tableItem__element"},e.name)),r.a.createElement("div",{className:"elements"},r.a.createElement("p",{className:"tableItem__element"},e.city),r.a.createElement("p",{className:"tableItem__element"},e.totalIncome))),r.a.createElement(f.b,{to:"/company/".concat(e.id),className:"tableItem__open"},r.a.createElement(w,{className:"tableItem__open"})))}),j=function(e){var t=e.currentCompanies;return r.a.createElement("section",{className:"incomeTable"},r.a.createElement("ul",{className:"table"},0!==t.length?t.map((function(e){return r.a.createElement(O,{key:e.id,id:e.id,name:e.name,city:e.city,totalIncome:e.totalIncome})})):r.a.createElement("p",{className:"table__error"},"Nothing to show")))},N=(a(64),function(e){var t=e.currentPage,a=e.totalPages,n=e.paginate,c=[];if(a>=5){if(t-2>1&&t+2<a)for(var l=t-2;l<=t+2;l++)c.push(l);else if(t-2<=1&&t+1<a)for(var o=1;o<=5;o++)c.push(o);else if(t-2>1&&t+2>=a)for(var i=a-4;i<=a;i++)c.push(i)}else for(var s=1;s<=a;s++)c.push(s);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pages"},c.map((function(e,a){return r.a.createElement("li",{onClick:function(){return n(e)},key:e,className:e===t?"pages__number pages__number--current":"pages__number"},r.a.createElement("p",{className:e===t?"pages__item pages__item--current":"pages__item"},e))}))))}),y=function(e){var t=e.company,a=e.numberOfItems,c=Object(n.useState)(1),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(a),m=Object(u.a)(s,1)[0],p=Object(n.useState)([]),d=Object(u.a)(p,2),g=d[0],A=d[1],b=o*m,v=b-m,E=g.slice(v,b),h=Math.ceil(g.length/m);return Object(n.useEffect)((function(){A(t)}),[t]),r.a.createElement("section",{className:"loaded"},r.a.createElement("header",{className:"header"},r.a.createElement(f.b,{to:"/companies-income/",className:"header__text"},r.a.createElement("h1",{className:"header__text"},"Companies"))),r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"search"},r.a.createElement("input",{type:"text",id:"filter",onChange:function(){var e=document.querySelector("#filter").value;if(e.length>0){var a=t.filter((function(t){return-1!==t.name.toUpperCase().indexOf(e.toUpperCase())}));A(a),i(1)}else A(t),i(1)},className:"search__input",placeholder:"Type company name here..."})),r.a.createElement(j,{currentCompanies:E}),r.a.createElement(N,{currentPage:o,totalPages:h,paginate:function(e){i(e)}})),r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__text"},"Created by Mateusz Gre\u0144, 2020")),r.a.createElement("span",{className:"background"}))},D=function(){var e=.01*window.innerHeight;return document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.innerHeight<=640?3:window.innerHeight<=840?4:6},x=(a(65),function(e){var t,a=e.data,c=Object(n.useState)([]),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),d=m[0],g=m[1],A=Object(p.f)().id,b=Object(n.useState)(0),v=Object(u.a)(b,2),E=v[0],h=v[1],w=Object(n.useState)(0),O=Object(u.a)(w,2),j=O[0],N=O[1],y=Object(n.useState)(0),D=Object(u.a)(y,2),x=D[0],F=D[1],S=Object(n.useState)(0),C=Object(u.a)(S,2),K=C[0],I=C[1],M=new Date,P=null;M.getMonth()-1<0?(t=11,P=M.getFullYear()-1):(t=M.getMonth()-1,P=M.getFullYear());var k=Object(n.useState)(new Date(P,t,1)),Y=Object(u.a)(k,2),B=Y[0],_=Y[1],U=Object(n.useState)(new Date(M.getFullYear(),M.getMonth(),1)),H=Object(u.a)(U,2),Q=H[0],z=H[1],X=function(e){return e.filter((function(e){return Number(e.id)===Number(A)}))};return Object(n.useEffect)((function(){if(0===o.length&&i(X(a[1])),0===d.length&&g(X(a[0])),o.length>0){!function(){if(o.length>0){var e=0;o[0].incomes.map((function(t){return e+=parseFloat(t.value),t}));var t=e/o[0].incomes.length;h(e.toFixed(2)),N(t.toFixed(2))}}(),function(e,t){if(e<=t){var a=o[0].incomes.filter((function(a){return new Date(a.date)>=e&&new Date(a.date)<=t})),n=0,r=0;a.length>0&&(a.map((function(e){return n+=parseFloat(e.value),e})),r=n/a.length),F(r.toFixed(2)),I(n.toFixed(2))}else{z(e);var c=o[0].incomes.filter((function(a){return new Date(a.date)>=e&&new Date(a.date)<=t})),l=0,i=0;c.length>0&&(c.map((function(e){return l+=parseFloat(e.value),e})),i=l/c.length),F(i.toFixed(2)),I(l.toFixed(2)),alert("Start date is earlier than end date (end date automatically changed to start date)")}}(B,Q);var e=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}),t=e.formatToParts(B),n=Object(u.a)(t,5),r=n[0].value,c=n[2].value,l=n[4].value,s=e.formatToParts(Q),m=Object(u.a)(s,5),f=m[0].value,p=m[2].value,A=m[4].value;document.querySelector("#startDate").value="".concat(l,"-").concat(r,"-").concat(c),document.querySelector("#endDate").value="".concat(A,"-").concat(f,"-").concat(p)}}),[a,d,o,B,Q]),r.a.createElement("section",{className:"company"},d.length>0&&o.length>0?r.a.createElement("div",{className:"wrapper"},r.a.createElement(f.b,{to:"/companies-income/",className:"company__back"},"Back"),r.a.createElement("div",{className:"dateRange"},r.a.createElement("label",{htmlFor:"startDate"},"From:"),r.a.createElement("input",{type:"date",id:"startDate",name:"startDate",onChange:function(){_(new Date(document.querySelector("#startDate").value))}}),r.a.createElement("label",{htmlFor:"endDate"},"to:"),r.a.createElement("input",{type:"date",id:"endDate",name:"endDate",onChange:function(){z(new Date(document.querySelector("#endDate").value))}})),r.a.createElement("div",{className:"company__info"},r.a.createElement("p",null,"ID: ",d[0].id),r.a.createElement("p",null,"Name: ",d[0].name),r.a.createElement("p",null,"City: ",d[0].city),r.a.createElement("p",null,"Total income: ",E),r.a.createElement("p",null,"Lifetime average: ",j),r.a.createElement("p",null,"Your range income: ",K),r.a.createElement("p",null,"Your range average income: ",x))):"",r.a.createElement("div",{className:"background"}))});var F=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current},S=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(u.a)(l,2),d=i[0],b=i[1],v=Object(n.useState)(!1),E=Object(u.a)(v,2),h=E[0],w=E[1],O=Object(n.useState)(5),j=Object(u.a)(O,2),N=j[0],S=j[1],C=Object(n.useState)(!0),K=Object(u.a)(C,2),I=K[0],M=K[1],P=function(){var e=Object(m.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,fetch("https://recruitment.hal.skygate.io/companies");case 4:if(!(a=e.sent).ok){e.next=9;break}return e.next=8,a.json();case 8:t=e.sent;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:c(t);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.length>0&&Promise.all(a.map((function(e){return g()("https://recruitment.hal.skygate.io/incomes/".concat(e.id))}))).then((function(e){return Promise.all(e.map((function(e){return e.data}))).then((function(e){var t=e.filter((function(e){return""!==e}));b(t)}))})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=F(a),B=F(d);return Object(n.useEffect)((function(){window.addEventListener("resize",(function(){D()})),0===a.length&&(P(),S(D())),Y&&Y.length!==a.length&&a.length>0&&k(a),B&&B.length!==d.length&&d.length>0&&function(){var e=[];a.map((function(t){var a=0;return d.find((function(e){return e.id===t.id})).incomes.map((function(e){return a+=parseFloat(e.value),e})),e.push(Object(o.a)(Object(o.a)({},t),{},{totalIncome:a.toFixed(2)})),t})),c(e),M(!1)}(),a.length>0&&(I||h||!a[0].totalIncome||function(){var e=a.sort((function(e,t){return t.totalIncome-e.totalIncome}));c(e),w(!0)}())}),[a,d]),r.a.createElement(f.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/"},h?r.a.createElement(y,{company:a,numberOfItems:N}):r.a.createElement(A,null)),r.a.createElement(p.a,{exact:!0,path:"/companies-income/"},h?r.a.createElement(y,{company:a,numberOfItems:N}):r.a.createElement(A,null)),r.a.createElement(p.a,{path:"/company/:id"},h?r.a.createElement(x,{data:[a,d]}):r.a.createElement(A,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.e88ccecd.chunk.js.map