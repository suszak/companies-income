(this["webpackJsonpcompanies-income"]=this["webpackJsonpcompanies-income"]||[]).push([[0],{34:function(e,t,a){e.exports=a(70)},39:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),o=a.n(r),s=(a(39),a(20)),l=a(8),i=a.n(l),m=a(16),u=a(11),p=a(12),f=a(14),d=a(13),h=a(9),g=a(1),b=a(32),A=a.n(b),v=(a(58),a(59),function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).slowConnection=function(){document.querySelector(".loadingScreen__info").innerText="Your connection is slow, please wait a moment"},n.state={slowConnectionTimeout:""},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({slowConnectionTimeout:setTimeout(this.slowConnection,16e3)})}},{key:"componentWillUnmount",value:function(){this.setState({slowConnectionTimeout:clearTimeout(this.state.slowConnectionTimeout)})}},{key:"render",value:function(){return c.a.createElement("section",{className:"loadingScreen"},c.a.createElement("div",{className:"loadingScreen__title"},"Loading"),c.a.createElement("div",{className:"loadingScreen__info"}),c.a.createElement("span",{className:"loadingScreen__animation"},c.a.createElement("div",{className:"element1"}),c.a.createElement("div",{className:"element2"}),c.a.createElement("div",{className:"element3"}),c.a.createElement("div",{className:"element4"}),c.a.createElement("div",{className:"element5"})),c.a.createElement("div",{className:"background background__first"}),c.a.createElement("div",{className:"background background__second"}))}}]),a}(n.Component)),w=a(3);a(60),a(61),a(62);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var a,n,c=function(e,t){if(null==e)return{};var a,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(c[a]=e[a]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(c[a]=e[a])}return c}var O=c.a.createElement("image",{id:"Warstwa_1","data-name":"Warstwa 1",x:20,y:20,width:160,height:160,xlinkHref:"data:img/png;base64,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"}),j=function(e){var t=e.svgRef,a=e.title,n=y(e,["svgRef","title"]);return c.a.createElement("svg",E({width:200,height:200,viewBox:"0 0 200 200",ref:t},n),a?c.a.createElement("title",null,a):null,O)},N=c.a.forwardRef((function(e,t){return c.a.createElement(j,E({svgRef:t},e))})),D=(a.p,function(e){return c.a.createElement("div",{className:"tableItem"},c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"elements"},c.a.createElement("p",{className:"tableItem__element"},e.id),c.a.createElement("p",{className:"tableItem__element"},e.name)),c.a.createElement("div",{className:"elements"},c.a.createElement("p",{className:"tableItem__element"},e.city),c.a.createElement("p",{className:"tableItem__element"},e.totalIncome))),c.a.createElement(h.b,{to:"/company/".concat(e.id),className:"tableItem__open"},c.a.createElement(N,{className:"tableItem__open"})))}),C=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return c.a.createElement("section",{className:"incomeTable"},c.a.createElement("ul",{className:"table"},0!==this.props.currentCompanies.length?this.props.currentCompanies.map((function(e){return c.a.createElement(D,{key:e.id,id:e.id,name:e.name,city:e.city,totalIncome:e.totalIncome})})):c.a.createElement("p",{className:"table__error"},"Nothing to show")))}}]),a}(n.Component),x=(a(68),function(e){var t=e.currentPage,a=e.totalPages,n=e.paginate,r=[];if(a>=5){if(t-1>1&&t+1<a){r.push(1),r.push("...");for(var o=t-1;o<=t+1;o++)r.push(o);r.push("..."),r.push(a)}else if(t-1<=1&&t+1<a){for(var s=1;s<=t+1;s++)r.push(s);r.push("..."),r.push(a)}else if(t-1>1&&t+1>=a){r.push(1),r.push("...");for(var l=t-1;l<=a;l++)r.push(l)}}else for(var i=1;i<=a;i++)r.push(i);return c.a.createElement("nav",null,c.a.createElement("ul",{className:"pages"},r.map((function(e,a){return"..."===e?c.a.createElement("li",{key:9999-a,className:"pages__number dots"},e):c.a.createElement("li",{onClick:function(){return n(e)},key:e,className:e===t?"pages__number pages__number--current":"pages__number"},c.a.createElement("p",{className:e===t?"pages__item pages__item--current":"pages__item"},e))}))))}),S=function(e){var t=e.company,a=e.numberOfItems,r=Object(n.useState)(1),o=Object(w.a)(r,2),s=o[0],l=o[1],i=Object(n.useState)(a),m=Object(w.a)(i,1)[0],u=Object(n.useState)([]),p=Object(w.a)(u,2),f=p[0],d=p[1],g=s*m,b=g-m,A=f.slice(b,g),v=Math.ceil(f.length/m),E=function(){var e=document.querySelector("#filter").value;if(e.length>0){var a=t.filter((function(t){return-1!==t.name.toUpperCase().indexOf(e.toUpperCase())}));d(a),l(1)}else d(t),l(1)};return Object(n.useEffect)((function(e,a){a||document.querySelector("#filter").addEventListener("keydown",(function(e){13===e.keyCode&&E()})),a&&a.company.length===t.length||d(t)}),[t]),c.a.createElement("section",{className:"loaded"},c.a.createElement("header",{className:"header"},c.a.createElement(h.b,{to:"/companies-income/",className:"header__text"},c.a.createElement("h1",{className:"header__text"},"Companies"))),c.a.createElement("main",{className:"main"},c.a.createElement("section",{className:"search"},c.a.createElement("input",{type:"text",id:"filter",className:"search__input",placeholder:"Type company name here..."}),c.a.createElement("button",{className:"search__button",onClick:E},"Filter")),c.a.createElement(C,{data:f,currentCompanies:A}),c.a.createElement(x,{currentPage:s,totalPages:v,paginate:function(e){l(e)}})),c.a.createElement("footer",{className:"footer"},c.a.createElement("p",{className:"footer__text"},"Created by Mateusz Gre\u0144, 2020")),c.a.createElement("span",{className:"background"}))},F=function(){var e=.01*window.innerHeight;return document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.innerHeight<=640?3:window.innerHeight<=840?4:6},I=(a(69),function(e){var t,a=e.data,r=Object(n.useState)([]),o=Object(w.a)(r,2),s=o[0],l=o[1],i=Object(n.useState)([]),m=Object(w.a)(i,2),u=m[0],p=m[1],f=Object(g.f)().id,d=Object(n.useState)(0),b=Object(w.a)(d,2),A=b[0],v=b[1],E=Object(n.useState)(0),y=Object(w.a)(E,2),O=y[0],j=y[1],N=Object(n.useState)(0),D=Object(w.a)(N,2),C=D[0],x=D[1],S=Object(n.useState)(0),F=Object(w.a)(S,2),I=F[0],k=F[1],K=new Date,M=null;K.getMonth()-1<0?(t=11,M=K.getFullYear()-1):(t=K.getMonth()-1,M=K.getFullYear());var P=Object(n.useState)(new Date(M,t,1)),_=Object(w.a)(P,2),B=_[0],Y=_[1],U=Object(n.useState)(new Date(K.getFullYear(),K.getMonth(),1)),H=Object(w.a)(U,2),Q=H[0],T=H[1],z=function(e){return e.filter((function(e){return Number(e.id)===Number(f)}))};return Object(n.useEffect)((function(e,t){if(!t&&(0===s.length&&l(z(a[1])),0===u.length&&p(z(a[0])),s.length>0)){!function(){if(s.length>0){var e=0;s[0].incomes.map((function(t){return e+=parseFloat(t.value),t}));var t=e/s[0].incomes.length;v(e.toFixed(2)),j(t.toFixed(2))}}(),function(e,t){if(e<t){var a=s[0].incomes.filter((function(a){return new Date(a.date)>=e&&new Date(a.date)<=t})),n=0,c=0;a.length>0&&(a.map((function(e){return n+=parseFloat(e.value),e})),c=n/a.length),x(c.toFixed(2)),k(n.toFixed(2))}else alert("Start date is earlier than end date")}(B,Q);var n=new Intl.DateTimeFormat("en",{year:"numeric",month:"2-digit",day:"2-digit"}),c=n.formatToParts(B),r=Object(w.a)(c,5),o=r[0].value,i=r[2].value,m=r[4].value,f=n.formatToParts(Q),d=Object(w.a)(f,5),h=d[0].value,g=d[2].value,b=d[4].value;document.querySelector("#startDate").value="".concat(m,"-").concat(o,"-").concat(i),document.querySelector("#endDate").value="".concat(b,"-").concat(h,"-").concat(g)}}),[a,u,s,B,Q]),c.a.createElement("section",{className:"company"},u.length>0&&s.length>0?c.a.createElement("div",{className:"wrapper"},c.a.createElement(h.b,{to:"/companies-income/",className:"company__back"},"Back"),c.a.createElement("div",{className:"dateRange"},c.a.createElement("label",{htmlFor:"startDate"},"From:"),c.a.createElement("input",{type:"date",id:"startDate",name:"startDate",onChange:function(){Y(new Date(document.querySelector("#startDate").value))}}),c.a.createElement("label",{htmlFor:"endDate"},"to:"),c.a.createElement("input",{type:"date",id:"endDate",name:"endDate",onChange:function(){T(new Date(document.querySelector("#endDate").value))}})),c.a.createElement("div",{className:"company__info"},c.a.createElement("p",null,"ID: ",u[0].id),c.a.createElement("p",null,"Name: ",u[0].name),c.a.createElement("p",null,"City: ",u[0].city),c.a.createElement("p",null,"Total income: ",A),c.a.createElement("p",null,"Lifetime average: ",O),c.a.createElement("p",null,"Your range income: ",I),c.a.createElement("p",null,"Your range average income: ",C))):"",c.a.createElement("div",{className:"background"}))}),k=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getSummaryData=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,fetch("https://recruitment.hal.skygate.io/companies");case 4:if(!(a=e.sent).ok){e.next=9;break}return e.next=8,a.json();case 8:t=e.sent;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),n.getIncomeData=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.state.companies.length>0&&Promise.all(n.state.companies.map((function(e){return A()("https://recruitment.hal.skygate.io/incomes/".concat(e.id))}))).then((function(e){return Promise.all(e.map((function(e){return e.data}))).then((function(e){var t=e.filter((function(e){return""!==e}));n.setState({incomes:t})}))})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)}))),n.countTotalIncomes=function(){var e=n.state.companies,t=n.state.incomes,a=[];e.map((function(e,n){var c=0;return t.find((function(t){return t.id===e.id})).incomes.map((function(e){return c+=parseFloat(e.value),e})),a.push(Object(s.a)(Object(s.a)({},e),{},{totalIncome:c.toFixed(2)})),e})),n.setState({companies:a,loading:!1})},n.sortArrayByTotalIncome=function(){var e=n.state.companies.sort((function(e,t){return t.totalIncome-e.totalIncome}));n.setState({companies:e,sorted:!0})},n.state={dataArray:[],companies:[],incomes:[],sorted:!1,numberOfItems:5,loading:!0},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",(function(){F()})),t=F(),e.t0=this,e.next=5,this.getSummaryData();case 5:e.t1=e.sent,e.t2=t,e.t3={companies:e.t1,numberOfItems:e.t2},e.t0.setState.call(e.t0,e.t3);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.companies.length!==this.state.companies.length&&this.state.companies.length>0&&this.getIncomeData(this.state.companies),a.incomes.length!==this.state.incomes.length&&this.state.incomes.length>0&&this.countTotalIncomes(),this.state.companies.length>0&&(this.state.loading||this.state.sorted||!this.state.companies[0].totalIncome||this.sortArrayByTotalIncome());case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement(h.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(g.c,null,c.a.createElement(g.a,{exact:!0,path:"/"},this.state.sorted?c.a.createElement(S,{company:this.state.companies,numberOfItems:this.state.numberOfItems}):c.a.createElement(v,null)),c.a.createElement(g.a,{exact:!0,path:"/companies-income/"},this.state.sorted?c.a.createElement(S,{company:this.state.companies,numberOfItems:this.state.numberOfItems}):c.a.createElement(v,null)),c.a.createElement(g.a,{path:"/company/:id"},this.state.sorted?c.a.createElement(I,{data:[this.state.companies,this.state.incomes]}):c.a.createElement(v,null)))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.0aea24fd.chunk.js.map